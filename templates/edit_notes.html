{% extends 'index.html' %}

{% block head %}
    <link rel="stylesheet" href="{% static 'mdeditor/css/editormd.css' %}">
    <link rel="stylesheet" href="{% static 'mdeditor/css/editormd.logo.css' %}">
    <link rel="stylesheet" href="{% static 'mdeditor/css/editormd.preview.css' %}">
    <script src="{% static 'mdeditor/js/jquery.min.js' %}"></script>
    <script src="{% static 'mdeditor/js/editormd.min.js' %}"></script>

{% endblock %}

{% block main %}
    <form method="post">
        {% csrf_token %}
        <div>
                <div class="form-row field-content">
                        <div class="flex-container">
                            <div class="wmd-wrapper editormd editormd-vertical editormd-theme-default" id="id_content-wmd-wrapper">
                                {#                     @linhaifeng:此处表示输入的内容     #}
                                <textarea name="content">{{ note.content }}</textarea>
                            <script type="text/javascript">
                                $(function () {
                                    editormd("id_content-wmd-wrapper", {
                                        watch: true, // 关闭实时预览
                                        lineNumbers: false,
                                        lineWrapping: false,
                                        width: "100%",
                                        height: "580px",
                                        placeholder: '',
                                        // 当有多个mdeditor时，全屏后，其他mdeditor仍然显示，解决此问题。
                                        onfullscreen: function () {
                                            this.editor.css("border-radius", 10).css("z-index", 9999);
                                        },
                                        onfullscreenExit: function () {
                                            this.editor.css({
                                                zIndex: 10,
                                                border: "1px solid rgb(221,221,221)"
                                            })
                                            this.editor.css("border-radius", 10).css("z-index", 9999);
                                        },
                                        syncScrolling: "single",
                                        path: "/static/mdeditor/js/lib" + "/",
                                        // theme
                                        theme: "dark",
                                        previewTheme: "dark",
                                        editorTheme: "default",

                                        saveHTMLToTextarea: true, // editor.md 有问题没有测试成功
                                        toolbarAutoFixed: true,
                                        searchReplace: true,
                                        emoji: true,
                                        tex: true,
                                        taskList: false,
                                        flowChart: true,
                                        sequenceDiagram: true,

                                        // image upload
                                        imageUpload: true,
                                        imageFormats: ['jpg', 'JPG', 'jpeg', 'JPEG', 'gif', 'GIF', 'png', 'PNG', 'bmp', 'BMP', 'webp', 'WEBP'],
                                        imageUploadURL: "/mdeditor/uploads/",
                                        toolbarIcons: function () {
                                            return ['undo', 'redo', '|','bold', 'del', 'italic', '|', 'list-ul', 'list-ol', 'hr', '|', 'link', 'reference-link', 'image', 'code', 'preformatted-text', 'code-block', 'table', 'datetime','html-entities', 'pagebreak', 'goto-line', '||', 'preview', 'watch', 'fullscreen']
                                        },
                                        onload: function () {
                                            console.log('onload', this);
                                        }
                                    });
                                });

                            </script>
                        </div>
                </div>
        </div>
        <button type="submit" class="btn btn-success btn-sm" style="float: right;">提交</button>
        </div>
    </form>

    {#    <script type="text/javascript">#}
    {##}
    {#var element = document.getElementById("diy_lhf");#}
    {#element.style.backgroundColor = "red";#}
    {#    </script>#}
{% endblock %}